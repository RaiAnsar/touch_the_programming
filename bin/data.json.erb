<%
require 'json'
COLORS = %w[
  000000 F44336 E91E63 FF4081 9C27B0 E040FB 673AB7 7C4DFF 3F51B5 536DFE
  2196F3 448AFF 03A9F4 40C4FF 00BCD4 18FFFF 009688 64FFDA 4CAF50 69F0AE
  8BC34A B2FF59 CDDC39 EEFF41 FFEB3B FFFF00 FFC107 FFD740 FF9800 FFAB40
  FF5722 FF6E40 795548 9E9E9E 607D8B
  Random
].to_json
OFFSETS = %w[
  -250 -200 -150 -100 -50
  0
  50 100 150 200 250
  Random
].to_json
SIZES = %w[
  10 20 30 40 50
  100 150
  Random
].to_json
NUM = %w[
  1 2 3 4 5 6 7 8 9
  11 12 13 14 15
  Random
].to_json
OPACITY = %w[
  1.0 0.9 0.7 0.5 0.3 0.1 0.0
  Random
].to_json
LINE_WIDTH = %w[
  0.0
  1.0 2.0 3.0
  Random
].to_json
V = %w[
  -1 -3 -5 -7 -10
  0
  1 3 5 7 10
  Random
].to_json
IFV = %w[
  -0.25 -0.5 -1 -2
  0
  0.25 0.5 1 2
  Random
].to_json
SHAPES = %w[
  Circle Rect RoundedRect Triangle Diamond Pentagon Hexagon Octagon Decagon Dodecagon Heart
  Star5 Star6 Star7 Star8
  Random
].to_json
LINE = %w[
  true false
].to_json
RADIUS = <<EOD.strip
      {
        "val": "50",
        "hide": true,
        "opts": [],
        "id": "r"
      },
EOD
IFX1 = <<EOD.strip
      {
        "val": "999999999",
        "hide": true,
        "opts": [],
        "id": "ifx1"
      },
EOD
IFY1 = <<EOD.strip
      {
        "val": "999999999",
        "hide": true,
        "opts": [],
        "id": "ify1"
      },
EOD
IFX2 = <<EOD.strip
      {
        "val": "-999999999",
        "hide": true,
        "opts": [],
        "id": "ifx2"
      },
EOD
IFY2 = <<EOD.strip
      {
        "val": "-999999999",
        "hide": true,
        "opts": [],
        "id": "ify2"
      },
EOD
IF1 = <<EOD.strip
      #{IFX1}
      #{IFY1}
EOD
IF2 = <<EOD.strip
      #{IFX2}
      #{IFY2}
EOD
FILL = <<EOD.strip
      {
        "val": "000000",
        "hide": true,
        "opts": [],
        "id": "fi"
      },
      {
        "val": "0.1",
        "hide": true,
        "opts": [],
        "id": "fiop"
      },
EOD
STROKE = <<EOD.strip
      {
        "val": "000000",
        "hide": true,
        "opts": [],
        "id": "st"
      },
      {
        "val": "0.9",
        "hide": true,
        "opts": [],
        "id": "stop"
      },
      {
        "val": "1",
        "hide": true,
        "opts": [],
        "id": "stw"
      },
EOD
SH = <<EOD.strip
      {
        "val": "Circle",
        "hide": true,
        "opts": [],
        "id": "sh"
      },
EOD
%>
[
  <%- # --- 1. Hello --- -%>
  [
    [
      <%= RADIUS %>
      <%= FILL %>
      <%= STROKE %>
      <%= IF1 %>
      <%= IF2 %>
      <%= SH %>
  <%- # --- -%>
      {
        "val": "/*",
        "hide": false,
        "opts": []
      }
    ],
    [
      {
        "val": "Welcome to the programming world!",
        "hide": false,
        "opts": []
      }
    ],
    [
      {
        "val": "The circle above is not just an image.",
        "hide": false,
        "opts": []
      }
    ],
    [
      {
        "val": "It is drawn by the code.",
        "hide": false,
        "opts": []
      }
    ],
    [
      {
        "val": "In this app, you can program by touch.",
        "hide": false,
        "opts": []
      }
    ],
    [
      {
        "val": "Let's touch the programming!!",
        "hide": false,
        "opts": []
      }
    ],
    [
      {
        "val": "*/",
        "hide": false,
        "opts": []
      }
    ]
  ],

  <%- # --- 2. Comments --- -%>
  [
    [
      <%= RADIUS %>
      <%= IF1 %>
      <%= IF2 %>
      <%= FILL %>
      <%= STROKE %>
      <%= SH %>
  <%- # --- -%>
      {
        "val": "/*",
        "hide": false,
        "opts": []
      }
    ],
    [
      {
        "val": "The part enclosed by \"/ *\" and \"* /\" is comment.",
        "hide": false,
        "opts": []
      }
    ],
    [
      {
        "val": "It does not run as a program.",
        "hide": false,
        "opts": []
      }
    ],
    [
      {
        "val": "*/",
        "hide": false,
        "opts": []
      }
    ]
  ],


  <%- # --- 3. Position --- -%>
  [
    [
      <%= RADIUS %>
      <%= IF1 %>
      <%= IF2 %>
      <%= FILL %>
      <%= STROKE %>
      <%= SH %>
  <%- # --- -%>
      {
        "val": "/*",
        "hide": false,
        "opts": []
      }
    ],
    [
      {
        "val": "You can use \"=\" to set the value.",
        "hide": false,
        "opts": []
      }
    ],
    [
      {
        "val": "Let's set the position of X and Y.",
        "hide": false,
        "opts": []
      }
    ],
    [
      {
        "val": "*/",
        "hide": false,
        "opts": []
      }
    ],
    [
      {
        "val": "x = ",
        "hide": false,
        "opts": []
      },
      {
        "val": "0",
        "hide": false,
        "opts": <%= OFFSETS %>,
        "noCache": false,
        "id": "x"
      }
    ],
    [
      {
        "val": "y = ",
        "hide": false,
        "opts": []
      },
      {
        "val": "0",
        "hide": false,
        "opts": <%= OFFSETS %>,
        "noCache": false,
        "id": "y"
      }
    ],
    [
      {
        "val": "/*",
        "hide": false,
        "opts": []
      }
    ],
    [
      {
        "val": "When \"Random\" is selected,",
        "hide": false,
        "opts": []
      }
    ],
    [
      {
        "val": "the value changes with each refresh.",
        "hide": false,
        "opts": []
      }
    ],
    [
      {
        "val": "*/",
        "hide": false,
        "opts": []
      }
    ]
  ],

  <%- # --- 4. Numbers --- -%>
  [
    [
      <%= RADIUS %>
      <%= IF1 %>
      <%= IF2 %>
      <%= FILL %>
      <%= STROKE %>
      <%= SH %>
      {
        "val": "Random",
        "hide": true,
        "opts": <%= OFFSETS %>,
        "noCache": false,
        "id": "x"
      },
      {
        "val": "Random",
        "hide": true,
        "opts": <%= OFFSETS %>,
        "noCache": false,
        "id": "y"
      },
  <%- # --- -%>
      {
        "val": "/*",
        "hide": false,
        "opts": []
      }
    ],
    [
      {
        "val": "If you increase \"numbers\",",
        "hide": false,
        "opts": []
      }
    ],
    [
      {
        "val": "the number of shapes increases.",
        "hide": false,
        "opts": []
      }
    ],
    [
      {
        "val": "*/",
        "hide": false,
        "opts": []
      }
    ],
    [
      {
        "val": "numbers = ",
        "hide": false,
        "opts": []
      },
      {
        "val": "1",
        "hide": false,
        "opts": <%= NUM %>,
        "noCache": false,
        "id": "n"
      }
    ]
  ],

  <%- # --- 5. Styles --- -%>
  [
    [
      <%= IF1 %>
      <%= IF2 %>
  <%- # --- -%>
      {
        "val": "/* The size of shapes. */",
        "hide": false,
        "opts": []
      }
    ],
    [
      {
        "val": "radius = ",
        "hide": false,
        "opts": []
      },
      {
        "val": "50",
        "hide": false,
        "opts": <%= SIZES %>,
        "noCache": false,
        "id": "r"
      }
    ],
    [
      {
        "val": "/* Fill */",
        "hide": false,
        "opts": []
      }
    ],
    [
      {
        "val": "fillColor = ",
        "hide": false,
        "opts": []
      },
      {
        "val": "000000",
        "hide": false,
        "opts": <%= COLORS %>,
        "noCache": false,
        "id": "fi"
      }
    ],
    [
      {
        "val": "fillOpacity = ",
        "hide": false,
        "opts": []
      },
      {
        "val": "0.1",
        "hide": false,
        "opts": <%= OPACITY %>,
        "noCache": false,
        "id": "fiop"
      }
    ],
    [
      {
        "val": "/* Stroke */",
        "hide": false,
        "opts": []
      }
    ],
    [
      {
        "val": "strokeColor = ",
        "hide": false,
        "opts": []
      },
      {
        "val": "000000",
        "hide": false,
        "opts": <%= COLORS %>,
        "noCache": false,
        "id": "st"
      }
    ],
    [
      {
        "val": "strokeOpacity = ",
        "hide": false,
        "opts": []
      },
      {
        "val": "0.9",
        "hide": false,
        "opts": <%= OPACITY %>,
        "noCache": false,
        "id": "stop"
      }
    ],
    [
      {
        "val": "strokeWidth = ",
        "hide": false,
        "opts": []
      },
      {
        "val": "1.0",
        "hide": false,
        "opts": <%= LINE_WIDTH %>,
        "noCache": false,
        "id": "stw"
      }
    ],
    [
      {
        "val": "/* Shape */",
        "hide": false,
        "opts": []
      }
    ],
    [
      {
        "val": "shape = ",
        "hide": false,
        "opts": []
      },
      {
        "val": "Circle",
        "hide": false,
        "opts": <%= SHAPES %>,
        "noCache": false,
        "id": "sh"
      }
    ]
  ],

  <%- # --- 6. Loop --- -%>
  [
    [
      <%= RADIUS %>
      <%= FILL %>
      <%= STROKE %>
      <%= IF1 %>
      <%= IF2 %>
      <%= SH %>
  <%- # --- -%>
      {
        "val": "/*",
        "hide": false,
        "opts": []
      }
    ],
    [
      {
        "val": "\"loop\" repeats the same thing.",
        "hide": false,
        "opts": []
      }
    ],
    [
      {
        "val": "It is a specialty of computer.",
        "hide": false,
        "opts": []
      }
    ],
    [
      {
        "val": "*/",
        "hide": false,
        "opts": []
      }
    ],
    [
      {
        "val": "/* Speed of x. */",
        "hide": false,
        "opts": []
      }
    ],
    [
      {
        "val": "vx = ",
        "hide": false,
        "opts": []
      },
      {
        "val": "1",
        "hide": false,
        "opts": <%= V %>,
        "noCache": false,
        "id": "vx"
      }
    ],
    [
      {
        "val": "/* Speed of y. */",
        "hide": false,
        "opts": []
      }
    ],
    [
      {
        "val": "vy = ",
        "hide": false,
        "opts": []
      },
      {
        "val": "0",
        "hide": false,
        "opts": <%= V %>,
        "noCache": false,
        "id": "vy"
      }
    ],
    [
      {
        "val": "/* Update position and move shape. */",
        "hide": false,
        "opts": []
      }
    ],
    [
      {
        "val": "loop {",
        "hide": false,
        "opts": []
      }
    ],
    [
      {
        "val": "  x = x + vx",
        "hide": false,
        "opts": []
      }
    ],
    [
      {
        "val": "  y = y + vy",
        "hide": false,
        "opts": []
      }
    ],
    [
      {
        "val": "}",
        "hide": false,
        "opts": []
      }
    ]
  ],

  <%- # --- 7. Line --- -%>
  [
    [
      <%= RADIUS %>
      <%= FILL %>
      <%= STROKE %>
      <%= IF1 %>
      <%= IF2 %>
      <%= SH %>
      {
        "val": "Random",
        "hide": true,
        "opts": <%= V %>,
        "noCache": false,
        "id": "vx"
      },
      {
        "val": "Random",
        "hide": true,
        "opts": <%= V %>,
        "noCache": false,
        "id": "vy"
      },
  <%- # --- -%>
      {
        "val": "/*",
        "hide": false,
        "opts": []
      }
    ],
    [
      {
        "val": "\"Line\" draws a trace of movement.",
        "hide": false,
        "opts": []
      }
    ],
    [
      {
        "val": "*/",
        "hide": false,
        "opts": []
      }
    ],
    [
      {
        "val": "lineColor = ",
        "hide": false,
        "opts": []
      },
      {
        "val": "000000",
        "hide": false,
        "opts": <%= COLORS %>,
        "noCache": false,
        "id": "li"
      }
    ],
    [
      {
        "val": "lineOpacity = ",
        "hide": false,
        "opts": []
      },
      {
        "val": "0.9",
        "hide": false,
        "opts": <%= OPACITY %>,
        "noCache": false,
        "id": "liop"
      }
    ],
    [
      {
        "val": "lineWidth = ",
        "hide": false,
        "opts": []
      },
      {
        "val": "1.0",
        "hide": false,
        "opts": <%= LINE_WIDTH %>,
        "noCache": false,
        "id": "liw"
      }
    ]
  ],

  <%- # --- 8. If --- -%>
  [
    [
      <%= RADIUS %>
      <%= FILL %>
      <%= STROKE %>
      <%= IFY1 %>
      <%= IFY2 %>
      <%= SH %>
  <%- # --- -%>
      {
        "val": "/*",
        "hide": false,
        "opts": []
      }
    ],
    [
      {
        "val": "\"If\" is used for the condition.",
        "hide": false,
        "opts": []
      }
    ],
    [
      {
        "val": "*/",
        "hide": false,
        "opts": []
      }
    ],
    [
      {
        "val": "vx = ",
        "hide": false,
        "opts": []
      },
      {
        "val": "1",
        "hide": false,
        "opts": <%= V %>,
        "noCache": false,
        "id": "vx"
      }
    ],
    [
      {
        "val": "loop {",
        "hide": false,
        "opts": []
      }
    ],
    [
      {
        "val": "  x = x + vx",
        "hide": false,
        "opts": []
      }
    ],
    [
      {
        "val": "  if (x > ",
        "hide": false,
        "opts": []
      },
      {
        "val": "150",
        "hide": false,
        "opts": <%= OFFSETS %>,
        "noCache": false,
        "id": "ifx1"
      },
      {
        "val": ") {",
        "hide": false,
        "opts": []
      }
    ],
    [
      {
        "val": "    vx = vx * ",
        "hide": false,
        "opts": []
      },
      {
        "val": "-1",
        "hide": false,
        "opts": <%= IFV %>,
        "noCache": false,
        "id": "ifxv1"
      }
    ],
    [
      {
        "val": "  }",
        "hide": false,
        "opts": []
      }
    ],
    [
      {
        "val": "  if (x < ",
        "hide": false,
        "opts": []
      },
      {
        "val": "-150",
        "hide": false,
        "opts": <%= OFFSETS %>,
        "noCache": false,
        "id": "ifx2"
      },
      {
        "val": ") {",
        "hide": false,
        "opts": []
      }
    ],
    [
      {
        "val": "    vx = vx *",
        "hide": false,
        "opts": []
      },
      {
        "val": "-1",
        "hide": false,
        "opts": <%= IFV %>,
        "noCache": true,
        "id": "ifxv2"
      }
    ],
    [
      {
        "val": "  }",
        "hide": false,
        "opts": []
      }
    ],
    [
      {
        "val": "}",
        "hide": false,
        "opts": []
      }
    ]
  ],

  <%- # --- 9. Wrap-up --- -%>
  [
    [
  <%- # --- -%>
      {
        "val": "/*",
        "hide": false,
        "opts": []
      }
    ],
    [
      {
        "val": "Let's use the program we learned.",
        "hide": false,
        "opts": []
      }
    ],
    [
      {
        "val": "*/",
        "hide": false,
        "opts": []
      }
    ],
    [
      {
        "val": "x = ",
        "hide": false,
        "opts": []
      },
      {
        "val": "0",
        "hide": false,
        "opts": <%= OFFSETS %>,
        "noCache": false,
        "id": "x"
      }
    ],
    [
      {
        "val": "y = ",
        "hide": false,
        "opts": []
      },
      {
        "val": "0",
        "hide": false,
        "opts": <%= OFFSETS %>,
        "noCache": false,
        "id": "y"
      }
    ],
    [
      {
        "val": "numbers = ",
        "hide": false,
        "opts": []
      },
      {
        "val": "1",
        "hide": false,
        "opts": <%= NUM %>,
        "noCache": false,
        "id": "n"
      }
    ],
    [
      {
        "val": "radius = ",
        "hide": false,
        "opts": []
      },
      {
        "val": "50",
        "hide": false,
        "opts": <%= SIZES %>,
        "noCache": false,
        "id": "r"
      }
    ],
    [
      {
        "val": "fillColor = ",
        "hide": false,
        "opts": []
      },
      {
        "val": "000000",
        "hide": false,
        "opts": <%= COLORS %>,
        "noCache": false,
        "id": "fi"
      }
    ],
    [
      {
        "val": "fillOpacity = ",
        "hide": false,
        "opts": []
      },
      {
        "val": "0.1",
        "hide": false,
        "opts": <%= OPACITY %>,
        "noCache": false,
        "id": "fiop"
      }
    ],
    [
      {
        "val": "strokeColor = ",
        "hide": false,
        "opts": []
      },
      {
        "val": "000000",
        "hide": false,
        "opts": <%= COLORS %>,
        "noCache": false,
        "id": "st"
      }
    ],
    [
      {
        "val": "strokeOpacity = ",
        "hide": false,
        "opts": []
      },
      {
        "val": "0.9",
        "hide": false,
        "opts": <%= OPACITY %>,
        "noCache": false,
        "id": "stop"
      }
    ],
    [
      {
        "val": "strokeWidth = ",
        "hide": false,
        "opts": []
      },
      {
        "val": "1.0",
        "hide": false,
        "opts": <%= LINE_WIDTH %>,
        "noCache": false,
        "id": "stw"
      }
    ],
    [
      {
        "val": "shape = ",
        "hide": false,
        "opts": []
      },
      {
        "val": "Circle",
        "hide": false,
        "opts": <%= SHAPES %>,
        "noCache": false,
        "id": "sh"
      }
    ],
    [
      {
        "val": "vx = ",
        "hide": false,
        "opts": []
      },
      {
        "val": "Random",
        "hide": false,
        "opts": <%= V %>,
        "noCache": false,
        "id": "vx"
      }
    ],
    [
      {
        "val": "vy = ",
        "hide": false,
        "opts": []
      },
      {
        "val": "Random",
        "hide": false,
        "opts": <%= V %>,
        "noCache": false,
        "id": "vy"
      }
    ],
    [
      {
        "val": "loop {",
        "hide": false,
        "opts": []
      }
    ],
    [
      {
        "val": "  x = x + vx",
        "hide": false,
        "opts": []
      }
    ],
    [
      {
        "val": "  y = y + vy",
        "hide": false,
        "opts": []
      }
    ],
    [
      {
        "val": "  if (x > ",
        "hide": false,
        "opts": []
      },
      {
        "val": "150",
        "hide": false,
        "opts": <%= OFFSETS %>,
        "noCache": false,
        "id": "ifx1"
      },
      {
        "val": ") {",
        "hide": false,
        "opts": []
      }
    ],
    [
      {
        "val": "    vx = vx * ",
        "hide": false,
        "opts": []
      },
      {
        "val": "-1",
        "hide": false,
        "opts": <%= IFV %>,
        "noCache": false,
        "id": "ifxv1"
      }
    ],
    [
      {
        "val": "  }",
        "hide": false,
        "opts": []
      }
    ],
    [
      {
        "val": "  if (x < ",
        "hide": false,
        "opts": []
      },
      {
        "val": "-150",
        "hide": false,
        "opts": <%= OFFSETS %>,
        "noCache": false,
        "id": "ifx2"
      },
      {
        "val": ") {",
        "hide": false,
        "opts": []
      }
    ],
    [
      {
        "val": "    vx = vx * ",
        "hide": false,
        "opts": []
      },
      {
        "val": "-1",
        "hide": false,
        "opts": <%= IFV %>,
        "noCache": true,
        "id": "ifxv2"
      }
    ],
    [
      {
        "val": "  }",
        "hide": false,
        "opts": []
      }
    ],
    [
      {
        "val": "  if (y > ",
        "hide": false,
        "opts": []
      },
      {
        "val": "150",
        "hide": false,
        "opts": <%= OFFSETS %>,
        "noCache": false,
        "id": "ify1"
      },
      {
        "val": ") {",
        "hide": false,
        "opts": []
      }
    ],
    [
      {
        "val": "    vy = vy * ",
        "hide": false,
        "opts": []
      },
      {
        "val": "-1",
        "hide": false,
        "opts": <%= IFV %>,
        "noCache": false,
        "id": "ifyv1"
      }
    ],
    [
      {
        "val": "  }",
        "hide": false,
        "opts": []
      }
    ],
    [
      {
        "val": "  if (y < ",
        "hide": false,
        "opts": []
      },
      {
        "val": "-150",
        "hide": false,
        "opts": <%= OFFSETS %>,
        "noCache": false,
        "id": "ify2"
      },
      {
        "val": ") {",
        "hide": false,
        "opts": []
      }
    ],
    [
      {
        "val": "    vy = vy * ",
        "hide": false,
        "opts": []
      },
      {
        "val": "-1",
        "hide": false,
        "opts": <%= IFV %>,
        "noCache": true,
        "id": "ifyv2"
      }
    ],
    [
      {
        "val": "  }",
        "hide": false,
        "opts": []
      }
    ],

    [
      {
        "val": "}",
        "hide": false,
        "opts": []
      }
    ],
    [
      {
        "val": "lineColor = ",
        "hide": false,
        "opts": []
      },
      {
        "val": "000000",
        "hide": false,
        "opts": <%= COLORS %>,
        "noCache": false,
        "id": "li"
      }
    ],
    [
      {
        "val": "lineOpacity = ",
        "hide": false,
        "opts": []
      },
      {
        "val": "0.9",
        "hide": false,
        "opts": <%= OPACITY %>,
        "noCache": false,
        "id": "liop"
      }
    ],
    [
      {
        "val": "lineWidth = ",
        "hide": false,
        "opts": []
      },
      {
        "val": "1.0",
        "hide": false,
        "opts": <%= LINE_WIDTH %>,
        "noCache": false,
        "id": "liw"
      }
    ]
  ]
]
